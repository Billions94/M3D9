<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <style>
        body {
          margin: 0;
          color: black;
          /* background: rgb(2,0,36);
          background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(177,18,129,1) 100%, rgba(0,212,255,1) 100%); */
        }
        .cool {
              background: rgb(2,0,36);
              background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(177,18,129,1) 100%, rgba(0,212,255,1) 100%);
          }
          #cart {
              overflow-y: scroll;
              max-height: 230px;
              /* display: -webkit-box; */
              /* -webkit-line-clamp: 1; */
              /* -webkit-box-orient: vertical; */
          }
  
          .cart-btn {
              width: 4.3rem;
              height: 2.15rem;
              margin-top: 2px;
              padding: 3px;
          }
  
          .card {
            border-radius: 0;
          }
  
          .card-img-top {
            object-fit: cover !important;
          }
          .container {
            position: relative;
            width: 50%;
          }
  
          .image {
            display: block;
            width: 100%;
            height: auto;
          }
  
          .overlay {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            width: 100%;
            opacity: 0;
            transition: .5s ease;
            background-color: #008CBA;
          }
  
          .container:hover .overlay {
            opacity: 1;
          }
  
          .text {
            color: white;
            font-size: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
          }

          .header-img{
              height: 40vh;
              object-fit: cover;
              
          }
      </style>

    <title>Hello, world!</title>
  </head>
  <body>
            <nav class="navbar navbar-expand-lg navbar-dark cool sticky-top">
                <a class="navbar-brand" href="#">Strivazon <img src="./images/navicon.png" style="width:15px" alt=""> </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
            
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item ">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="backoffice.html">Back Office</a>
                    </li>
                </ul>
                </div>
            </nav>

            <img src="./images/fashion.jpg" alt="" class="header-img img-fluid w-100">

            
            
            <div class="container">
                <h1 class="text-dark">Edit Product</h1>
                <div  class="row justify-content-center">
                    <div class="col-8">
                        <ul id="ul" class="list-group list-group-flush">

                        </ul>
                    </div>
                </div>
            </div>




    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <script>


        const getProduct = (product) => {

                const container = document.querySelector('.row')
                const containerNode = document.createElement('div')
                containerNode.className = 'col-3'
                containerNode.innerHTML = `          
                             <li class="list-group-item">${name}</li>
                            <li class="list-group-item">${description}</li>
                            <li class="list-group-item">${brand}</li>
                            <li class="list-group-item">${imgUrl}</li>
                            <li class="list-group-item">${price}</li>
                        `

                    container.appendChild(containerNode)
        }

        const fetchData = () => {
            const productId = new URLSearchParams(location.search).get('productId')
            const url = productId ? "https://striveschool-api.herokuapp.com/api/product/" + productId : "https://striveschool-api.herokuapp.com/api/product/"
  
            const {name, description, brand, imgUrl, price} = data
            console.log(data)

                    // document.getElementById('name').value = name
                    // document.getElementById('description').value = description
                    // document.getElementById('brand').value =  brand
                    // document.getElementById('Img-Url').value = imgUrl
                    // document.getElementById('price').value = price 


                fetch((url), {
                // method: 'GET',
                // body: JSON.stringify(myObject), 
                headers: {
                "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTRiMjJhYTRiYjUzZDAwMTViMTllZGUiLCJpYXQiOjE2MzIzMTQwMjcsImV4cCI6MTYzMzUyMzYyN30.77Yuy9DLj_tVyAeila_3MBsQRZdNMxEbAkVipEDT8CI"
                }
                })
                .then(response => response.json())
                .then(data => {

                console.log(data)
                data.forEach(product => {
                
                getProduct(product)
                console.log(product)
                
                })

            })

            }
        
        window.onload = () => {
            fetchData()
        }
        // window.onload = async (event) => {
            

        //     const {name, description, brand, imgUrl, price} = data
        //     console.log(data)

        //             document.getElementById('name').value = name
        //             document.getElementById('description').value = description
        //             document.getElementById('brand').value =  brand
        //             document.getElementById('Img-Url').value = imgUrl
        //             document.getElementById('price').value = price 

        //     const container = document.querySelector('#ul')
        //     const productItems = document.createElement("li")
        //     productItems.innerHTML = `          
        //                     <li class="list-group-item">${name}</li>
        //                     <li class="list-group-item">${description}</li>
        //                     <li class="list-group-item">${brand}</li>
        //                     <li class="list-group-item">${imgUrl}</li>
        //                     <li class="list-group-item">${price}</li>
        //                 `
        //                 container.appendChild(productItems)


        //             // const myObject = {
        //             //     name: name,
        //             //     description: description,
        //             //     brand: brand,
        //             //     imageUrl: imgUrl,
        //             //     price: parseInt(price)    
        //             // }
        //             // console.log(myObject)
        //     try {
                
        //         const response = await fetch((url), {
        //         method: 'GET',
        //         body: JSON.stringify(url)
        //         })
        //         if(response.ok){
        //             alert('Your edit request was successful.')
        //             window.location.assign('home.html')
        //         } else {
        //             alert('Something went wrong with your request')
        //         }

        //     } catch (err) {
        //         console.log(err)
        //     }
        // }

 

    </script>


  </body>
</html>